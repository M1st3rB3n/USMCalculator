<div {{ attributes }}>
    {% for message in app.flashes('error') %}
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    {% endfor %}

    {{ form_start(form, {
        attr: {
            'data-action': 'live#action:prevent',
            'data-live-action-param': 'save'
        }
    }) }}
        {{ form_row(form.nom) }}

        <div class="mt-4 mb-4 p-3 border rounded bg-light">
            <h4 class="h5 mb-3">{{ form_label(form.annees) }}</h4>
            <div id="annees-list"
                 data-model="live-collection(annees)">
                {% for anneeField in form.annees %}
                    <div class="annee-item mb-2 d-flex gap-2" data-live-collection-item-value="{{ loop.index0 }}">
                        <div class="flex-grow-1">
                            {{ form_widget(anneeField) }}
                            {{ form_errors(anneeField) }}
                        </div>
                        <button type="button" class="btn btn-outline-danger" data-action="live#action" data-live-action-param="removeCollectionItem" data-live-name-param="annees" data-live-index-param="{{ loop.index0 }}">Supprimer</button>
                    </div>
                {% endfor %}
            </div>
            <button type="button" class="btn btn-sm btn-outline-primary mt-2" data-action="live#action" data-live-action-param="addCollectionItem" data-live-name-param="annees">Ajouter une ann√©e</button>
        </div>

        <div class="d-flex justify-content-between mt-3">
            <a href="{{ path('app_categorie_index') }}" class="btn btn-secondary">Annuler</a>
            <button type="submit" class="btn {{ initialFormData and initialFormData.id ? 'btn-primary' : 'btn-success' }}">
                Enregistrer
                <span data-loading="show" class="spinner-border spinner-border-sm ms-1" role="status"></span>
            </button>
        </div>
    {{ form_end(form) }}
</div>
